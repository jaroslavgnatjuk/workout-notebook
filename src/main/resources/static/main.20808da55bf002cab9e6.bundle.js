webpackJsonp([1,4],{151:function(e,t,n){"use strict";var r=n(0),i=n(309);n.d(t,"a",function(){return s});var c=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.http=e}return e.prototype.getExercises=function(){return this.http.get("/api/exercises")},e.prototype.getExerciseFacts=function(){return this.http.get("/api/exercise-facts-today")},e.prototype.getExerciseFactsByExerciseId=function(e){return this.http.get("/api/exercise-facts/"+e)},e.prototype.deleteFact=function(e){return this.http.delete("/api/exercise-facts?id="+e)},e.prototype.getFactsByDate=function(e){return this.http.get("/api/exercise-facts?dt="+encodeURIComponent(e))},e.prototype.getFactsAllDays=function(){return this.http.get("/api/exercise-facts-all-days")},e.prototype.addExerciseFact=function(e,t,n){var r=new i.b({"Content-Type":"application/json"}),c=new i.c({headers:r}),o={id:0,exerciseId:e,count:t,weight:n},s=JSON.stringify(o);return this.http.post("/api/exercise-facts",s,c)},e.prototype.editExercise=function(e){var t=new i.b({"Content-Type":"application/json"}),n=new i.c({headers:t}),r=JSON.stringify(e);return this.http.put("/api/exercise",r,n)},e.prototype.addExercise=function(e,t){var n=new i.b({"Content-Type":"application/json"}),r=new i.c({headers:n});return this.http.post("/api/exercise?title="+encodeURIComponent(t)+"&category="+encodeURIComponent(e),{},r)},e=c([n.i(r.c)(),o("design:paramtypes",["function"==typeof(t=void 0!==i.d&&i.d)&&t||Object])],e);var t}()},386:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=386},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(474),i=n(0),c=n(510),o=n(505);c.a.production&&n.i(i.a)(),n.i(r.a)().bootstrapModule(o.a)},504:function(e,t,n){"use strict";var r=n(0);n.d(t,"a",function(){return o});var i=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(){}return e=i([n.i(r.Q)({selector:"app-root",template:n(669),styles:[n(664)]}),c("design:paramtypes",[])],e)}()},505:function(e,t,n){"use strict";var r=n(0),i=n(83),c=n(504),o=n(508),s=n(465),a=n(148),d=n(309),f=n(509),u=n(214),p=n(506),l=n(151),h=n(507);n.d(t,"a",function(){return g});var y=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=[{path:"",redirectTo:"/train",pathMatch:"full"},{path:"train",component:f.a},{path:"history",component:o.a},{path:"history-exercise",component:h.a},{path:"**",redirectTo:"/train"}],g=function(){function e(){}return e=y([n.i(r.b)({imports:[u.a.forRoot(x),a.a,i.a,s.a,d.a],declarations:[c.a,o.a,f.a,p.a,h.a],bootstrap:[c.a],providers:[l.a]}),b("design:paramtypes",[])],e)}()},506:function(e,t,n){"use strict";var r=n(0);n.d(t,"a",function(){return o});var i=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(){}return e=i([n.i(r.Q)({selector:"app-header",template:n(670),styles:[n(665)]}),c("design:paramtypes",[])],e)}()},507:function(e,t,n){"use strict";var r=n(0),i=n(214),c=n(151);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.activatedRoute=e,this.dbService=t}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.queryParams.subscribe(function(t){var n=t.exerciseId;e.dbService.getExerciseFactsByExerciseId(n).subscribe(function(t){e.exerciseFacts=t.json()})})},e=o([n.i(r.Q)({selector:"app-history-exercise",template:n(671),styles:[n(666)]}),s("design:paramtypes",["function"==typeof(t=void 0!==i.b&&i.b)&&t||Object,"function"==typeof(a=void 0!==c.a&&c.a)&&a||Object])],e);var t,a}()},508:function(e,t,n){"use strict";var r=n(0),i=n(151);n.d(t,"a",function(){return s});var c=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.dbService=e,this.days=[]}return e.prototype.ngOnInit=function(){var e=this;this.dbService.getFactsAllDays().subscribe(function(t){e.days=t.json()}),this.dbService.getExercises().subscribe(function(t){e.exercises=t.json()})},e.prototype.getExerciseById=function(e){return this.exercises&&this.exercises.filter(function(t){return t.id===e})[0]},e.prototype.showHistory=function(e){var t=this;this.dbService.getFactsByDate(e).subscribe(function(e){t.exerciseFacts=e.json(),console.log(t.exerciseFacts)})},e=c([n.i(r.Q)({selector:"app-history",template:n(672),styles:[n(667)]}),o("design:paramtypes",["function"==typeof(t=void 0!==i.a&&i.a)&&t||Object])],e);var t}()},509:function(e,t,n){"use strict";var r=n(0),i=n(151),c=n(214);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,r){var i,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.dbService=e,this.router=t,this.exercisesMap=[],this.selectedCategory="грудь"}return e.prototype.ngOnInit=function(){this.refreshExercises(),this.refreshFacts()},e.prototype.refreshExercises=function(){var e=this;this.dbService.getExercises().subscribe(function(t){e.exercises=t.json(),console.log(t),e.exercisesMap=e.exerciseToMap(e.exercises),e.categories=Object.keys(e.exercisesMap)})},e.prototype.refreshFacts=function(){var e=this;this.dbService.getExerciseFacts().subscribe(function(t){e.exerciseFacts=t.json(),console.log(t)})},e.prototype.getExerciseById=function(e){return this.exercises&&this.exercises.filter(function(t){return t.id===e})[0]},e.prototype.exerciseToMap=function(e){var t={};return e.forEach(function(e){t[e.category]||(t[e.category]=[]),t[e.category].push(e)}),t},e.prototype.deleteFact=function(e){var t=this;return this.dbService.deleteFact(e).subscribe(function(){return t.refreshFacts()})},e.prototype.addExerciseFact=function(e,t,n){var r=this;if(void 0===e)return void alert("Не выбрано упражнение");this.dbService.addExerciseFact(e,t,n).subscribe(function(e){console.log(e),r.refreshFacts()})},e.prototype.editExercise=function(e){var t=this,n=this.exercises.filter(function(t){return t.id==e})[0],r=prompt("Введите название упражнения",n.title);if(n&&r){var i={title:r,category:n.category,id:n.id};this.dbService.editExercise(i).subscribe(function(e){console.log(e),t.refreshExercises()})}},e.prototype.showHistory=function(e){if(!e)return void alert("Выберите упражнение");this.router.navigate(["history-exercise"],{queryParams:{exerciseId:e}})},e.prototype.addExercise=function(){var e=this,t=prompt("Введите название упражнения");t&&this.dbService.addExercise(this.selectedCategory,t).subscribe(function(t){console.log(t),e.refreshExercises()})},e.prototype.copyFact=function(e,t,n){var r=this;this.dbService.addExerciseFact(e,t,n).subscribe(function(){return r.refreshFacts()})},e=o([n.i(r.Q)({selector:"app-train",template:n(673),styles:[n(668)]}),s("design:paramtypes",["function"==typeof(t=void 0!==i.a&&i.a)&&t||Object,"function"==typeof(a=void 0!==c.c&&c.c)&&a||Object])],e);var t,a}()},510:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={production:!0}},664:function(e,t){e.exports=""},665:function(e,t){e.exports=".header-container{background-color:#666;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:5px}.header-container .title-container a{color:#bbb}.header-container .buttons-container a{color:#eee;font-weight:700;text-decoration:none}"},666:function(e,t){e.exports=".history-exercise-container,.history-exercise-container table{width:100%}"},667:function(e,t){e.exports=".fact-table{width:100%}"},668:function(e,t){e.exports=".categories,.select-exercise{display:-webkit-box;display:-ms-flexbox;display:flex}.select-exercise{width:100%}.digits,.done{margin-top:10px}.done{border-top:1px solid gray}.fact-table{width:100%}"},669:function(e,t){e.exports="<app-header></app-header>\n<router-outlet></router-outlet>\n"},670:function(e,t){e.exports='<div class="header-container">\n\n  <div class="title-container">\n    <a class="app-title cursor-pointer" [routerLink]="[\'train\']">WN</a>\n  </div>\n\n  <div class="buttons-container">\n    <a class="cursor-pointer" [routerLink]="[\'history\']">history</a>\n  </div>\n</div>\n'},671:function(e,t){e.exports='<div class="history-exercise-container">\n  <table>\n    <tr>\n      <td>дата</td>\n      <td>к-во</td>\n      <td>вес</td>\n    </tr>\n    <tr *ngFor="let fact of exerciseFacts; let i = index">\n      <td>{{fact.dt | date:\'y-MM-dd HH:mm:ss\'}}</td>\n      <td>{{fact.count}}</td>\n      <td>{{fact.weight}}</td>\n    </tr>\n  </table>\n</div>\n'},672:function(e,t){e.exports='<select [(ngModel)]="selectedDay" class="select-exercise" (change)="showHistory(selectedDay)">\n  <option *ngFor="let day of days" [value]="day.dt">{{day.dt}}</option>\n</select>\n\n<table class="fact-table">\n  <tr>\n    <th>упр</th>\n    <th>к-во</th>\n    <th>вес</th>\n    <th>время</th>\n  </tr>\n  <tr *ngFor="let exercise of exerciseFacts">\n    <td>{{getExerciseById(exercise?.exerciseId)?.title}}</td>\n    <td>{{exercise.count}}</td>\n    <td>{{exercise.weight}}</td>\n    <td>{{exercise.dt  | date:\'HH:mm:ss\'}}</td>\n  </tr>\n</table>\n'},673:function(e,t){e.exports='<div class="categories">\n  <div *ngFor="let category of categories">\n    {{category}}\n    <input name="category" type="radio" [value]="category" [(ngModel)]="selectedCategory">\n  </div>\n</div>\n\n<div class="select-exercise">\n  <select [(ngModel)]="selectedExerciseId" class="select-exercise">\n    <option *ngFor="let exercise of exercisesMap[selectedCategory]" [value]="exercise.id">{{exercise.title}}</option>\n  </select>\n  <button (click)="editExercise(selectedExerciseId)">edit</button>\n  <button (click)="addExercise()">+</button>\n  <button (click)="showHistory(selectedExerciseId)">hist</button>\n</div>\n\n<div class="digits">\n  <table>\n    <tr>\n      <td>к-во:</td>\n      <td><input type="number" [(ngModel)]="count"></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td>вес:</td>\n      <td><input type="number" [(ngModel)]="weight"></td>\n    </tr>\n    <tr>\n      <td></td>\n      <td>\n        <button (click)="addExerciseFact(selectedExerciseId, count, weight)">save</button>\n      </td>\n    </tr>\n  </table>\n</div>\n\n<div class="done">\n  <table class="fact-table">\n    <tr>\n      <th>упр</th>\n      <th>к-во</th>\n      <th>вес</th>\n      <th></th>\n    </tr>\n    <tr *ngFor="let exercise of exerciseFacts">\n      <td>{{getExerciseById(exercise?.exerciseId)?.title}}</td>\n      <td>{{exercise.count}}</td>\n      <td>{{exercise.weight}}</td>\n      <td>\n        <button (click)="deleteFact(exercise.id)">x</button>\n      </td>\n      <td>\n        <button (click)="copyFact(exercise.exerciseId, exercise.count, exercise.weight)">copy</button>\n      </td>\n    </tr>\n  </table>\n</div>\n'},690:function(e,t,n){e.exports=n(387)}},[690]);